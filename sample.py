
import math
import nltk
nltk.download('punkt')
nltk.download('stopwords')
nltk.download('reuters')
from nltk.corpus import stopwords
from collections import defaultdict
from nltk.corpus import reuters
import streamlit as st
st.title("Information Retrieval System ")
st.markdown("Sample Dataset 1000 sentences")
#------------------- ui ------------------------------
from streamlit_lottie import st_lottie
import requests
# define function to load lottie animation from URL
# @st.cache_resource(suppress_st_warning=True, allow_output_mutation=True)
def load_lottie_url(url):
    r = requests.get(url)
    return r.json()
# load lottie animation from URL
url = "https://assets4.lottiefiles.com/packages/lf20_xbf1be8x.json"
lottie_json = load_lottie_url(url)
# display lottie animation
st_lottie(lottie_json)
#-----------------------------------------------
query = st.text_input("Enter your query:")
# query = "This is the first document."
# Step 1: Collect the corpus
# corpus = reuters.fileids()
# corpus = [reuters.fileid for fileid in corpus]

# # Step 1: Collect the corpus
# corpus = ['This is the first document.',
#           'First document is good.',
#           'for the best document refer the first',
#           'THIS IS THE FIRST DOCUMENT',
#           'This is the second document.',
#           'And this is the third one.',
#           'Is this the first document?']
corpus = ['The taste of grape is refreshing.', 'I love to eat kiwi for breakfast.', 'I prefer plum over other fruits.', 'The color of the apple is beautiful.', 'I am allergic to plum.', 'The color of the pineapple is beautiful.', 'A watermelon a day keeps the doctor away.', 'I like to make smoothies with blueberry.', 'A pomegranate a day keeps the doctor away.', 'The texture of mango is soft and smooth.', 'I love to eat blackberry for breakfast.', 'The taste of orange is refreshing.', 'I am allergic to blueberry.', 'I am allergic to orange.', 'The texture of raspberry is soft and smooth.', 'The texture of apricot is soft and smooth.', 'The taste of blueberry is refreshing.', 'My favorite fruit is pear.', 'I am allergic to strawberry.', 'The color of the orange is beautiful.', 'A watermelon a day keeps the doctor away.', 'The taste of kiwi is refreshing.', 'I prefer orange over other fruits.', 'I am allergic to blackberry.', 'A cherry a day keeps the doctor away.', 'The peach is sweet and juicy.', 'My favorite fruit is kiwi.', 'I am allergic to mango.', 'I like to make smoothies with pomegranate.', 'My favorite fruit is pineapple.', 'I love to eat banana for breakfast.', 'I like to make smoothies with raspberry.', 'The watermelon is sweet and juicy.', 'My favorite fruit is pear.', 'I like to make smoothies with pomegranate.', 'The color of the apple is beautiful.', 'A strawberry a day keeps the doctor away.', 'I am allergic to blackberry.', 'The blackberry is sweet and juicy.', 'The texture of blackberry is soft and smooth.', 'The texture of strawberry is soft and smooth.', 'I am allergic to grape.', 'I am allergic to pineapple.', 'I like to make smoothies with grape.', 'My favorite fruit is orange.', 'The taste of banana is refreshing.', 'The apricot is sweet and juicy.', 'I prefer cherry over other fruits.', 'I love to eat cherry for breakfast.', 'I am allergic to raspberry.', 'I prefer blackberry over other fruits.', 'I prefer pear over other fruits.', 'I like to make smoothies with orange.', 'I like to make smoothies with mango.', 'I prefer watermelon over other fruits.', 'I prefer watermelon over other fruits.', 'The taste of pear is refreshing.', 'My favorite fruit is peach.', 'I prefer plum over other fruits.', 'The texture of mango is soft and smooth.', 'A banana a day keeps the doctor away.', 'A orange a day keeps the doctor away.', 'The taste of blueberry is refreshing.', 'I prefer blackberry over other fruits.', 'The texture of melon is soft and smooth.', 'The taste of pear is refreshing.', 'The pomegranate is sweet and juicy.', 'My favorite fruit is pear.', 'I am allergic to mango.', 'I prefer grape over other fruits.', 'I prefer lemon over other fruits.', 'I like to make smoothies with raspberry.', 'My favorite fruit is grape.', 'A watermelon a day keeps the doctor away.', 'The taste of apple is refreshing.', 'My favorite fruit is grape.', 'The strawberry is sweet and juicy.', 'The taste of lemon is refreshing.', 'A plum a day keeps the doctor away.', 'My favorite fruit is apple.', 'I like to make smoothies with melon.', 'I love to eat banana for breakfast.', 'The texture of plum is soft and smooth.', 'I prefer pomegranate over other fruits.', 'The color of the pear is beautiful.', 'A pomegranate a day keeps the doctor away.', 'A orange a day keeps the doctor away.', 'My favorite fruit is pineapple.', 'My favorite fruit is raspberry.', 'I am allergic to blueberry.', 'I like to make smoothies with raspberry.', 'The texture of mango is soft and smooth.', 'I prefer grape over other fruits.', 'My favorite fruit is cherry.', 'A mango a day keeps the doctor away.', 'A apple a day keeps the doctor away.', 'I am allergic to raspberry.', 'The watermelon is sweet and juicy.', 'The taste of lemon is refreshing.', 'I like to make smoothies with cherry.', 'I am allergic to mango.', 'The apricot is sweet and juicy.', 'I like to make smoothies with blueberry.', 'I like to make smoothies with apple.', 'The lemon is sweet and juicy.', 'The color of the apricot is beautiful.', 'A pomegranate a day keeps the doctor away.', 'The taste ofapricot is refreshing.', 'A kiwi a day keeps the doctor away.', 'A pomegranate a day keeps the doctor away.', 'I like to make smoothies with banana.', 'I like to make smoothies with mango.', 'The color of the apple is beautiful.', 'The texture of apple is soft and smooth.', 'I am allergic to blackberry.', 'The color of the mango is beautiful.', 'My favorite fruit is blueberry.', 'The peach is sweet and juicy.', 'The taste of apple is refreshing.', 'I like to make smoothies with lime.', 'The taste of pomegranate is refreshing.', 'I prefer banana over other fruits.', 'I love to eat watermelon for breakfast.', 'The blackberry is sweet and juicy.', 'I love to eat mango for breakfast.', 'My favorite fruit is strawberry.', 'I love to eat watermelon for breakfast.', 'I am allergic to pineapple.', 'The orange is sweet and juicy.', 'The taste of lemon is refreshing.', 'I love to eat banana for breakfast.', 'The color of the blackberry is beautiful.', 'The texture of apricot is soft and smooth.', 'I like to make smoothies with peach.', 'The color of the orange is beautiful.', 'A apple a day keeps the doctor away.', 'I prefer pomegranate over other fruits.', 'The texture of lemon is soft and smooth.', 'The color of the apple is beautiful.', 'A lime a day keeps the doctor away.', 'My favorite fruit is raspberry.', 'The mango is sweet and juicy.', 'A peach a day keeps the doctor away.', 'My favorite fruit is kiwi.', 'My favorite fruit is peach.', 'A lemon a day keeps the doctor away.', 'The color of the lemon is beautiful.', 'The texture of apricot is soft and smooth.', 'The watermelon is sweet and juicy.', 'The pomegranate is sweet and juicy.', 'I prefer cherry over other fruits.', 'The taste of peach is refreshing.', 'The strawberry is sweet and juicy.', 'My favorite fruit is apricot.', 'I like to make smoothies with plum.', 'I like to make smoothies with plum.', 'The texture of apple is soft and smooth.', 'A mango a day keeps the doctor away.', 'I prefer blackberry over other fruits.', 'I am allergic to pineapple.', 'The texture of blackberry is soft and smooth.', 'The cherry is sweet and juicy.', 'I prefer peach over other fruits.', 'The pomegranate is sweet and juicy.', 'The color of the apple is beautiful.', 'The color of the plum is beautiful.', 'I prefer melon over other fruits.', 'I like to make smoothies with apple.', 'A grape a day keeps the doctor away.', 'I like to make smoothies with watermelon.', 'The texture of apple is soft and smooth.', 'The texture of grape is soft and smooth.', 'I prefer apricot over other fruits.', 'The taste of apricot is refreshing.', 'The texture of grape is soft and smooth.', 'I like to make smoothies with cherry.', 'I love to eat peach for breakfast.', 'I like to make smoothies with pear.', 'The color of the pomegranate is beautiful.', 'The orange is sweet and juicy.', 'The texture of mango is soft and smooth.', 'I am allergic to plum.', 'I love to eat cherry for breakfast.', 'The lemon is sweet and juicy.', 'My favorite fruit is blueberry.', 'I prefer lime over other fruits.', 'The texture of grape is soft and smooth.', 'A blackberry a day keeps the doctor away.', 'The taste of apple is refreshing.', 'The texture of kiwi is soft and smooth.', 'I am allergic to mango.', 'I am allergic to watermelon.', 'I love to eat banana for breakfast.', 'I like to make smoothies with plum.', 'I prefer grape over other fruits.', 'The taste of raspberry is refreshing.', 'The color of the grape is beautiful.', 'The texture of pineapple is soft and smooth.', 'I am allergic to mango.', 'The color of the banana is beautiful.', 'I am allergic to apricot.', 'I like to make smoothies with strawberry.', 'I am allergic to blueberry.', 'A grape a day keeps the doctor away.', 'The texture of pineapple is soft and smooth.', 'The color of the mango is beautiful.', 'The color of the pineapple is beautiful.', 'I love to eat lemon for breakfast.', 'The taste of pear is refreshing.', 'The color of the apple is beautiful.', 'The taste of mango is refreshing.', 'The peach is sweet and juicy.', 'The texture of kiwi is soft and smooth.', 'The texture of lime is soft and smooth.', 'The taste of cherry is refreshing.', 'The taste of blueberry is refreshing.', 'The blackberry is sweet and juicy.', 'My favorite fruit is peach.', 'I love to eat pear for breakfast.', 'The taste of pear is refreshing.', 'The mango is sweet and juicy.', 'My favorite fruit is lime.', 'I am allergic to melon.', 'I like to make smoothies with banana.', 'The strawberry is sweet and juicy.', 'A cherry a day keeps the doctor away.', 'I am allergic to peach.', 'The color of the mango is beautiful.', 'I love to eat apricot for breakfast.', 'My favorite fruit is blackberry.', 'A cherry a day keeps the doctor away.', 'A plum a day keeps the doctor away.', 'I am allergic to lemon.', 'My favorite fruit is melon.', 'I prefer lemon over other fruits.', 'I am allergic to orange.', 'I love to eat strawberry for breakfast.', 'The texture of blackberry is soft and smooth.', 'I prefer pomegranate over other fruits.', 'The texture of pomegranate is soft and smooth.', 'A grape a day keeps the doctor away.', 'I am allergic to apple.', 'I prefer pomegranate over other fruits.', 'My favorite fruit is strawberry.', 'I am allergic to kiwi.', 'The watermelon is sweet and juicy.', 'I like to make smoothies with apricot.', 'A watermelon a day keeps the doctor away.', 'I love to eat watermelon for breakfast.', 'The texture of raspberry is soft and smooth.', 'The color of the melon is beautiful.', 'The mango is sweet and juicy.', 'I prefer strawberry over other fruits.', 'My favorite fruit is banana.', 'I am allergic to watermelon.', 'The taste of watermelon is refreshing.', 'The pomegranate is sweet and juicy.', 'My favorite fruit is orange.', 'The color of the orange is beautiful.', 'I like to make smoothies with watermelon.', 'I am allergic to melon.', 'The texture of lemon is soft and smooth.', 'The texture of pomegranate is soft and smooth.', 'I like to make smoothies with pear.', 'The color of the melon is beautiful.', 'The texture of pineapple is soft and smooth.', 'I prefer lemon over other fruits.', 'The color of the lime is beautiful.', 'I love to eat banana for breakfast.', 'The texture of pear is soft and smooth.', 'I like to make smoothies with watermelon.', 'My favorite fruit is watermelon.', 'The raspberry is sweet and juicy.', 'I am allergic to orange.', 'The taste of lime is refreshing.', 'My favorite fruit is pear.', 'The color of the pineapple is beautiful.', 'I like to make smoothies with apple.', 'I am allergic to kiwi.', 'I like to make smoothies with lime.', 'I prefer mango over other fruits.', 'The texture of mango is soft and smooth.', 'I like to make smoothies with strawberry.', 'The taste of apricot is refreshing.', 'The color of the lime is beautiful.', 'The color of the orange is beautiful.', 'I am allergic to pear.', 'The mango is sweet and juicy.', 'I am allergic to pomegranate.', 'I am allergic to orange.', 'A melon a day keeps the doctor away.', 'My favorite fruit is lime.', 'My favorite fruit is watermelon.', 'I am allergic to cherry.', 'The taste of plum is refreshing.', 'I love to eat kiwi for breakfast.', 'The apricot is sweet and juicy.', 'The color of the plum is beautiful.', 'The texture of mango is soft and smooth.', 'The cherry is sweet and juicy.', 'I love to eat lemon for breakfast.', 'The lemon is sweet and juicy.', 'The texture of strawberry is soft and smooth.', 'I prefer apricot over other fruits.', 'The taste of kiwi is refreshing.', 'I love to eat peach for breakfast.', 'I love to eat grape for breakfast.', 'A pear a day keeps the doctor away.', 'I love to eat kiwi for breakfast.', 'I am allergic to plum.', 'I like to make smoothies with melon.', 'The banana is sweet and juicy.', 'My favorite fruit is lime.', 'A apple a day keeps the doctor away.', 'A plum a day keeps the doctor away.', 'The taste of lemon is refreshing.', 'The color of the melon is beautiful.', 'A pomegranate a day keeps the doctor away.', 'A cherry a day keeps the doctor away.', 'The texture of blueberry is soft and smooth.', 'My favorite fruit is pomegranate.', 'The color of theraspberry is beautiful.', 'A banana a day keeps the doctor away.', 'A grape a day keeps the doctor away.', 'I love to eat cherry for breakfast.', 'The texture of pear is soft and smooth.', 'The taste of apricot is refreshing.', 'The texture of raspberry is soft and smooth.', 'My favorite fruit is apple.', 'I love to eat lime for breakfast.', 'The pineapple is sweet and juicy.', 'The color of the peach is beautiful.', 'The color of the lemon is beautiful.', 'I like to make smoothies with apricot.', 'The texture of peach is soft and smooth.', 'The taste of plum is refreshing.', 'A peach a day keeps the doctor away.', 'My favorite fruit is cherry.', 'The color of the strawberry is beautiful.', 'The taste of orange is refreshing.', 'I love to eat plum for breakfast.', 'I like to make smoothies with plum.', 'The plum is sweet and juicy.', 'I am allergic to cherry.', 'I like to make smoothies with mango.', 'The color of the mango is beautiful.', 'I like to make smoothies with peach.', 'A lime a day keeps the doctor away.', 'I love to eat mango for breakfast.', 'The melon is sweet and juicy.', 'The texture of apricot is soft and smooth.', 'The lime is sweet and juicy.', 'I like to make smoothies with melon.', 'The taste of banana is refreshing.', 'The taste of pomegranate is refreshing.', 'The lemon is sweet and juicy.', 'I like to make smoothies with banana.', 'The taste of grape is refreshing.', 'The taste of melon is refreshing.', 'I am allergic to strawberry.', 'The texture of apricot is soft and smooth.', 'I prefer watermelon over other fruits.', 'I love to eat blueberry for breakfast.', 'The texture of lime is soft and smooth.', 'A kiwi a day keeps the doctor away.', 'A lime a day keeps the doctor away.', 'I love to eat peach for breakfast.', 'The color of the raspberry is beautiful.', 'I am allergic to peach.', 'The pomegranate is sweet and juicy.', 'I love to eat orange for breakfast.', 'My favorite fruit is blackberry.', 'I love to eat blueberry for breakfast.', 'I love to eat mango for breakfast.', 'A pear a day keeps the doctor away.', 'I like to make smoothies with peach.', 'The texture of orange is soft and smooth.', 'My favorite fruit is apricot.', 'The texture of orange is soft and smooth.', 'The texture of peach is soft and smooth.', 'I am allergic to raspberry.', 'The color of the mango is beautiful.', 'My favorite fruit is peach.', 'I am allergic to banana.', 'My favorite fruit is apricot.', 'I like to make smoothies with raspberry.', 'A cherry a day keeps the doctor away.', 'The taste of blueberry is refreshing.', 'I am allergic to raspberry.', 'The lime is sweet and juicy.', 'I am allergic to pineapple.', 'I am allergic to peach.', 'I love to eat plum for breakfast.', 'I love to eat cherry for breakfast.', 'I love to eat lemon for breakfast.', 'The texture of orange is soft and smooth.', 'The color of the grape is beautiful.', 'A strawberry a day keeps the doctor away.', 'I like to make smoothies with apple.', 'A apricot a day keeps the doctor away.', 'I prefer blueberry over other fruits.', 'I prefer melon over other fruits.', 'The color of the lime is beautiful.', 'The color of the apricot is beautiful.', 'The color of the pomegranate is beautiful.', 'I prefer pomegranate over other fruits.', 'I love to eat banana for breakfast.', 'My favorite fruit is lime.', 'A cherry a day keeps the doctor away.', 'The lime is sweet and juicy.', 'I am allergic to mango.', 'A mango a day keeps the doctor away.', 'The melon is sweet and juicy.', 'The color of the banana is beautiful.', 'The apricot is sweet and juicy.', 'The taste of raspberry is refreshing.', 'The texture of blackberry is soft and smooth.', 'I prefer orange over other fruits.', 'The texture of orange is soft and smooth.', 'I love to eat apple for breakfast.', 'I love to eat cherry for breakfast.', 'The strawberry is sweet and juicy.', 'I love to eat lemon for breakfast.', 'The taste of kiwi is refreshing.', 'The peach is sweet and juicy.', 'A grape a day keeps the doctor away.', 'The texture of pineapple is soft and smooth.', 'My favorite fruit is blackberry.', 'I prefer mango over other fruits.', 'I prefer apple over other fruits.', 'I love to eat orange for breakfast.', 'I love to eat watermelon for breakfast.', 'I prefer apple over other fruits.', 'The taste of pineapple is refreshing.', 'The taste of plum is refreshing.', 'The texture of pineapple is soft and smooth.', 'I prefer pear over other fruits.', 'I prefer blackberry over other fruits.', 'I love to eat cherry for breakfast.', 'I like to make smoothies with pineapple.', 'The taste of pear is refreshing.', 'The color of the pineapple is beautiful.', 'I like to make smoothies with grape.', 'I love to eat apple for breakfast.', 'I am allergic to grape.', 'I like to make smoothies with watermelon.', 'I am allergic to cherry.', 'My favorite fruit is pear.', 'My favorite fruit is watermelon.', 'The pomegranate is sweet and juicy.', 'A lime a day keeps the doctor away.', 'The watermelon is sweet and juicy.', 'I am allergic to plum.', 'I am allergic to pineapple.', 'My favorite fruit is melon.', 'A cherry a day keeps the doctor away.', 'I like to make smoothies with melon.', 'I love to eat peach for breakfast.', 'The plum is sweet and juicy.', 'The cherry is sweet and juicy.', 'I prefer apricot over other fruits.', 'A pineapple a day keeps the doctor away.', 'The texture of grape is soft and smooth.', 'The color of the peach is beautiful.', 'The taste of blackberry is refreshing.', 'I love to eat peach for breakfast.', 'I prefer orange over other fruits.', 'I like to make smoothies with pear.', 'The taste of pear is refreshing.', 'A blueberry a day keeps the doctor away.', 'A raspberry a day keeps the doctor away.', 'I like to make smoothies with apple.', 'I love to eat pineapple for breakfast.', 'The texture of blackberry is soft and smooth.', 'I like to make smoothies with banana.', 'A strawberry a day keeps the doctor away.', 'I love to eat kiwi for breakfast.', 'The pear is sweet and juicy.', 'The color of the pineapple is beautiful.', 'I am allergic to peach.', 'I like to make smoothies with apricot.', 'I like to make smoothies with banana.', 'My favorite fruit is kiwi.', 'I love to eat pineapple for breakfast.', 'I am allergic to lemon.', 'The taste of melon is refreshing.', 'I prefer raspberry over other fruits.', 'My favorite fruit is blueberry.', 'The taste of apricot is refreshing.', 'My favorite fruit is lime.', 'The texture of strawberry is soft and smooth.', 'The taste of pear is refreshing.', 'I prefer pineapple over other fruits.', 'The color of the strawberry is beautiful.', 'The taste of apricot is refreshing.', 'The texture of melon is soft and smooth.', 'A banana a day keeps the doctor away.', 'A apricot a day keeps the doctor away.', 'The color of the raspberry is beautiful.', 'I love to eat raspberry for breakfast.', 'My favorite fruit is watermelon.', 'The texture of cherry is soft and smooth.', 'I am allergic to blueberry.', 'I am allergic to cherry.', 'My favorite fruit is plum.', 'I prefer mango over other fruits.', 'I love to eat cherry for breakfast.', 'My favorite fruit is lime.', 'I prefer cherry over other fruits.', 'The taste of mango is refreshing.', 'I love to eat raspberry for breakfast.', 'The color of the strawberry is beautiful.', 'The color of the pomegranate is beautiful.', 'My favorite fruit is peach.', 'I prefer lime over other fruits.', 'I like to make smoothies with pineapple.', 'I am allergic to orange.', 'I like to make smoothies with orange.', 'The taste of lime is refreshing.', 'I am allergic to lime.', 'A watermelon a day keeps the doctor away.', 'The color of the strawberry is beautiful.', 'The color of the plum is beautiful.', 'I prefer pineapple over other fruits.', 'I like to make smoothies with kiwi.', 'I am allergic to melon.', 'I like to make smoothies with raspberry.', 'My favorite fruit is apple.', 'A watermelon a day keeps the doctor away.', 'I like to make smoothies with lemon.', 'I prefer apple over other fruits.', 'The color of the blueberry is beautiful.', 'My favorite fruit is strawberry.', 'I am allergic to pineapple.', 'I like to make smoothies with lime.', 'I am allergic to pineapple.', 'My favorite fruit is apple.', 'The taste of watermelon is refreshing.', 'A peach a day keeps the doctor away.', 'I prefer watermelon over other fruits.', 'A apple a day keeps the doctor away.', 'The raspberry is sweet and juicy.', 'The plum is sweet and juicy.', 'My favorite fruit is grape.', 'I prefer peach over other fruits.', 'A kiwi a day keeps the doctor away.', 'The color of the plum is beautiful.', 'A apple a day keeps the doctor away.', 'I like to make smoothies with orange.', 'The pomegranate is sweet and juicy.', 'I love to eat watermelon for breakfast.', 'I like to make smoothies with blueberry.', 'I am allergic to plum.', 'I am allergic to blueberry.', 'The color of the pineapple is beautiful.', 'I like to make smoothies with lemon.', 'The color of the pineapple is beautiful.', 'The texture of melon is soft and smooth.', 'The grape is sweet and juicy.', 'The texture of cherry is soft and smooth.', 'The taste of peach is refreshing.', 'I love to eat grape for breakfast.', 'The taste of kiwi is refreshing.', 'The lemon is sweet and juicy.', 'I am allergic to pineapple.', 'The texture of melon is soft and smooth.', 'I prefer blackberry over other fruits.', 'The color of the lime is beautiful.', 'I like to make smoothies with lime.', 'The color of the pear is beautiful.', 'The color of the apple is beautiful.', 'The taste of strawberry is refreshing.', 'The color of the peach is beautiful.', 'The color of the pineapple is beautiful.', 'I like to make smoothies with melon.', 'A grape a day keeps the doctor away.', 'The lime is sweet and juicy.', 'The texture of mango is soft and smooth.', 'I love to eat melon for breakfast.', 'My favorite fruit is pear.', 'I like to make smoothies with raspberry.', 'The texture of grape is soft and smooth.', 'I love to eat kiwi for breakfast.', 'I prefer apple over other fruits.', 'My favorite fruit is cherry.', 'My favorite fruit is plum.', 'I prefer blackberry over other fruits.', 'A lime a day keeps the doctor away.', 'The taste of apricot is refreshing.', 'The strawberry is sweet and juicy.', 'A cherry a day keeps the doctor away.', 'I like to make smoothies with peach.', 'I love to eat peach for breakfast.', 'The grape is sweet and juicy.', 'My favorite fruit is blackberry.', 'The texture of pomegranate is soft and smooth.', 'I like to make smoothies with melon.', 'I am allergic to cherry.', 'I am allergic to banana.', 'The taste of grape is refreshing.', 'My favorite fruit is orange.', 'I am allergic to apricot.', 'A lemon a day keeps the doctor away.', 'I like to make smoothies with lime.', 'I love to eat pineapple for breakfast.', 'My favorite fruit is plum.', 'I love to eat watermelon for breakfast.', 'I like to make smoothies with watermelon.', 'My favorite fruit is pomegranate.', 'The cherry is sweet and juicy.', 'I am allergic to apple.', 'The pineapple is sweet and juicy.', 'I like to make smoothies with mango.', 'I love to eat lime for breakfast.', 'The color of the lime is beautiful.', 'I am allergic to cherry.', 'The orange is sweet and juicy.', 'The mango is sweet and juicy.', 'The taste of lemon is refreshing.', 'I love to eat grape for breakfast.', 'The color of the melon is beautiful.', 'I prefer strawberry over other fruits.', 'The color of the banana is beautiful.', 'I love to eat banana for breakfast.', 'I prefer kiwi over other fruits.', 'My favorite fruit is lemon.', 'I am allergic to plum.', 'I love to eat raspberry for breakfast.', 'I am allergic to blueberry.', 'A banana a day keeps the doctor away.', 'I love to eat apricot for breakfast.', 'A melon a day keeps the doctor away.', 'I am allergic to kiwi.', 'A cherry a day keeps the doctor away.', 'I like to make smoothies with kiwi.', 'The color of the cherry is beautiful.', 'I like to make smoothies with pineapple.', 'I am allergic to melon.', 'I prefer kiwi over other fruits.', 'A orange a day keeps the doctor away.', 'A raspberry a day keeps the doctor away.', 'I love to eat blueberry for breakfast.', 'I prefer melon over other fruits.', 'A cherry a day keeps the doctor away.', 'I am allergic to kiwi.', 'The taste of blackberry is refreshing.', 'I like to make smoothies with blueberry.', 'I prefer orange over other fruits.', 'My favorite fruit is raspberry.', 'The texture of plum is soft and smooth.', 'The texture of cherry is soft and smooth.', 'The apricot is sweet and juicy.', 'The color of the blueberry is beautiful.', 'I prefer watermelon over other fruits.', 'The color of the lime is beautiful.', 'A cherry a day keeps the doctor away.', 'The banana is sweet and juicy.', 'I am allergic to orange.', 'I am allergic to orange.', 'I am allergic to raspberry.', 'My favorite fruit is blueberry.', 'The taste of pear is refreshing.', 'The taste of banana is refreshing.', 'The texture of peach is soft and smooth.', 'My favorite fruit is mango.', 'I love to eat strawberry for breakfast.', 'The color of the melon is beautiful.', 'The color of the lemon is beautiful.', 'I like to make smoothies with apricot.', 'The taste of apricot is refreshing.', 'The pomegranate is sweet and juicy.', 'The peach is sweet and juicy.', 'The orange is sweet and juicy.', 'The lime is sweet and juicy.', 'The color of the mango is beautiful.', 'I love to eat strawberry for breakfast.', 'I prefer grape over other fruits.', 'The color of the banana is beautiful.', 'I prefer blackberry over other fruits.', 'I love to eat apple for breakfast.', 'The color of the apple is beautiful.', 'A banana a day keeps the doctor away.', 'The taste of plum is refreshing.', 'I am allergic to banana.', 'My favorite fruit is pear.', 'A raspberry a day keeps the doctor away.', 'I love to eat lemon for breakfast.', 'My favorite fruit is cherry.', 'I prefer cherry over other fruits.', 'The texture of apricot is soft and smooth.', 'I am allergic to apricot.', 'A banana a day keeps the doctor away.', 'I like to make smoothies with strawberry.', 'I prefer apple over other fruits.', 'The color of the lemon is beautiful.', 'The kiwi is sweet and juicy.', 'The taste of plum is refreshing.', 'I like to make smoothies with grape.', 'The grape is sweet and juicy.', 'My favorite fruit is lime.', 'I prefer cherry over other fruits.', 'I prefer strawberry over other fruits.', 'A apricot a day keeps the doctor away.', 'I prefer raspberry over other fruits.', 'The texture of pineapple is soft and smooth.', 'The taste of watermelon is refreshing.', 'I am allergic to blackberry.', 'The melon is sweet and juicy.', 'The color of the plum is beautiful.', 'My favorite fruit is pineapple.', 'The color of the apricot is beautiful.', 'I prefer apricot over other fruits.', 'The texture of pear is soft and smooth.', 'I prefer blueberry over other fruits.', 'I love to eat lemon for breakfast.', 'I like to make smoothies with lemon.', 'My favorite fruit is pineapple.', 'I am allergic to mango.', 'I prefer melon over other fruits.', 'The texture of plum is soft and smooth.', 'I like to make smoothies with watermelon.', 'A melon a day keeps the doctor away.', 'I prefer apricot over other fruits.', 'The taste of orange is refreshing.', 'The color of the lime is beautiful.', 'I prefer lime over other fruits.', 'I like to make smoothies with pineapple.', 'The taste of lemon is refreshing.', 'I like to make smoothies with blackberry.', 'I like to make smoothies with mango.', 'I love to eat blueberry for breakfast.', 'A apple a day keeps the doctor away.', 'The taste of blackberry is refreshing.', 'I prefer grape over other fruits.', 'I like to make smoothies with strawberry.', 'I love to eat apricot for breakfast.', 'The taste of banana is refreshing.', 'The taste of plum is refreshing.', 'The taste of blackberry is refreshing.', 'I am allergic to strawberry.', 'My favorite fruit is banana.', 'The taste of lemon is refreshing.', 'My favorite fruit is raspberry.', 'A pineapple a day keeps the doctor away.', 'I like to make smoothies with melon.', 'My favorite fruit is blackberry.', 'A banana a day keeps the doctor away.', 'The color of the lemon is beautiful.', 'I love to eat melon for breakfast.', 'The color of the blackberry is beautiful.', 'I like to make smoothies with mango.', 'The color of the orange is beautiful.', 'I like to make smoothies with raspberry.', 'I am allergic to strawberry.', 'The taste of peach is refreshing.', 'I love to eat orange for breakfast.', 'I am allergic to apple.', 'The taste of plum is refreshing.', 'I like to make smoothies with apricot.', 'I love to eat apple for breakfast.', 'The texture of lime is soft and smooth.', 'I like to make smoothies with plum.', 'A lemon a day keeps the doctor away.', 'I love to eat mango for breakfast.', 'I am allergic to strawberry.', 'The taste of pineapple is refreshing.', 'A raspberry a day keeps the doctor away.', 'I love to eat mango for breakfast.', 'The blueberry is sweet and juicy.', 'I prefer pomegranate over other fruits.', 'I prefer blackberry over other fruits.', 'The banana is sweet and juicy.', 'I like to make smoothies with kiwi.', 'My favorite fruit is lemon.', 'A cherry a day keeps the doctor away.', 'The blueberry is sweet and juicy.', 'The texture of blueberry is soft and smooth.', 'My favorite fruit is blueberry.', 'I am allergic to lemon.', 'The texture of banana is soft and smooth.', 'My favorite fruit is peach.', 'I prefer watermelon over other fruits.', 'I like to make smoothies with raspberry.', 'I love to eat melon for breakfast.', 'The color of the kiwi is beautiful.', 'I love to eat strawberry for breakfast.', 'The taste of blueberry is refreshing.', 'My favorite fruit is raspberry.', 'I prefer mango over other fruits.', 'My favorite fruit is peach.', 'The watermelon is sweet and juicy.', 'The color of the blueberry is beautiful.', 'I love to eat lime for breakfast.', 'I prefer grape over other fruits.', 'My favorite fruit is blueberry.', 'A melon a day keeps the doctor away.', 'My favorite fruit is melon.', 'The taste of peach is refreshing.', 'I am allergic to apricot.', 'I like to make smoothies with cherry.', 'I like to make smoothies with grape.', 'The color of the blackberry is beautiful.', 'I love to eat pomegranate for breakfast.', 'I prefer peach over other fruits.', 'The raspberry is sweet and juicy.', 'The color of the pineapple is beautiful.', 'The taste of pineapple is refreshing.', 'The color of the watermelon is beautiful.', 'The texture of plum is soft and smooth.', 'I like to make smoothies with lime.', 'The taste of watermelon is refreshing.', 'The pomegranate is sweet and juicy.', 'A pomegranate a day keeps the doctor away.', 'The kiwi is sweet and juicy.', 'The color of the cherry is beautiful.', 'I prefer banana over other fruits.', 'The texture of grape is soft and smooth.', 'My favorite fruit is lime.', 'The plum is sweet and juicy.', 'The taste of plum is refreshing.', 'I am allergic to blackberry.', 'A cherry a day keeps the doctor away.', 'A lemon a day keeps the doctor away.', 'The taste of pomegranate is refreshing.', 'My favorite fruit is mango.', 'My favorite fruit is raspberry.', 'The texture of banana is soft and smooth.', 'I love to eat watermelon for breakfast.', 'The color of the watermelon is beautiful.', 'I love to eat pineapple for breakfast.', 'The apple is sweet and juicy.', 'I am allergic to pineapple.', 'The texture of pomegranate is soft and smooth.', 'A kiwi a day keeps the doctor away.', 'I like to make smoothies with lemon.', 'A pear a day keeps the doctor away.', 'I prefer banana over other fruits.', 'I am allergic to watermelon.', 'I am allergic to blueberry.', 'I like to make smoothies with mango.', 'The color of the pineapple is beautiful.', 'I like to make smoothies with lemon.', 'I prefer pomegranate over other fruits.', 'I am allergic to lime.', 'The texture of strawberry is soft and smooth.', 'The taste of lime is refreshing.', 'The texture of melon is soft and smooth.', 'I like to make smoothies with apple.', 'The blackberry is sweet and juicy.', 'The apple is sweet and juicy.', 'A apple a day keeps the doctor away.', 'The apple is sweet and juicy.', 'I prefer blackberry over other fruits.', 'The pineapple is sweet and juicy.', 'My favorite fruit is pineapple.', 'I prefer plum over other fruits.', 'The taste of kiwi is refreshing.', 'I like to make smoothies with lime.', 'My favorite fruit is apple.', 'I am allergic to watermelon.', 'The taste of orange is refreshing.', 'A raspberry a day keeps the doctor away.', 'I am allergic to pomegranate.', 'The texture of watermelon is soft and smooth.', 'The texture of melon is soft and smooth.', 'The color of the mango is beautiful.', 'My favorite fruit is mango.', 'I prefer plum over other fruits.', 'I prefer raspberry over other fruits.', 'A lemon a day keeps the doctor away.', 'A pineapple a day keeps the doctor away.', 'My favorite fruit is plum.', 'I prefer strawberry over other fruits.', 'A blueberry a day keeps the doctor away.', 'I prefer banana over other fruits.', 'A mango a day keeps the doctor away.', 'The texture of pomegranate is soft and smooth.', 'I like to make smoothies with mango.', 'My favorite fruit is apple.', 'The texture of pear is soft and smooth.', 'The taste of blueberry is refreshing.', 'The cherry is sweet and juicy.', 'The melon is sweet and juicy.', 'The texture of apple is soft and smooth.', 'My favorite fruit is plum.', 'I like to make smoothies with watermelon.', 'A lime a day keeps the doctor away.', 'I am allergic to orange.', 'I prefer raspberry over other fruits.', 'I like to make smoothies with blackberry.', 'The color of the kiwi is beautiful.', 'I prefer orange over other fruits.', 'The orange is sweet and juicy.', 'The taste of cherry is refreshing.', 'I am allergic to raspberry.', 'The taste of grape is refreshing.', 'I prefer melon over other fruits.', 'The taste of raspberry is refreshing.', 'The color of the plum is beautiful.', 'My favorite fruit is grape.', 'My favorite fruit is peach.', 'The apricot is sweet and juicy.', 'The color of the lime is beautiful.', 'I love to eat raspberry for breakfast.', 'The taste of plum is refreshing.', 'The taste of pear is refreshing.', 'The texture of pineapple is soft and smooth.', 'The lime is sweet and juicy.', 'The texture of pineapple is soft and smooth.', 'The grape is sweet and juicy.', 'The blackberry is sweet and juicy.', 'I like to make smoothies with banana.', 'The pomegranate is sweet and juicy.', 'I prefer melon over other fruits.', 'My favorite fruit is plum.', 'I prefer blackberry over other fruits.', 'I am allergic to orange.', 'I am allergic to pomegranate.', 'My favorite fruit is blackberry.', 'I prefer pineapple over other fruits.', 'A watermelon a day keeps the doctor away.', 'The texture of pear is soft and smooth.', 'I like to make smoothies with watermelon.', 'I am allergic to orange.', 'I am allergic to raspberry.', 'The taste of apple is refreshing.', 'My favorite fruit is pomegranate.', 'I prefer peach over other fruits.', 'My favorite fruit is grape.', 'I prefer peach over other fruits.', 'My favorite fruit is lemon.', 'The taste of banana is refreshing.', 'The texture of cherry is soft and smooth.', 'I am allergic to pear.', 'I prefer blueberry over other fruits.', 'The color of the watermelon is beautiful.', 'The color of the melon is beautiful.', 'I love to eat pomegranate for breakfast.', 'I am allergic to blueberry.', 'A pineapple a day keeps the doctor away.', 'The texture of cherry is soft and smooth.', 'I prefer peach over other fruits.', 'I love to eat strawberry for breakfast.', 'A strawberry a day keeps the doctor away.', 'I prefer melon over other fruits.', 'The taste of kiwi is refreshing.', 'I love to eat watermelon for breakfast.', 'I like to make smoothies with raspberry.', 'The color of the grape is beautiful.', 'I prefer grape over other fruits.', 'I am allergic to apricot.', 'A peach a day keeps the doctor away.', 'I like to make smoothies with blueberry.', 'A orange a day keeps the doctor away.', 'My favorite fruit is pineapple.', 'A apricot a day keeps the doctor away.', 'The color of the apricot is beautiful.', 'My favorite fruit is kiwi.', 'The texture of lime is soft and smooth.', 'The taste of pineapple is refreshing.', 'The color of the lime is beautiful.', 'The taste of mango is refreshing.', 'My favorite fruit is watermelon.', 'I like to make smoothies with grape.', 'I like to make smoothies with peach.', 'The texture of blueberry is soft and smooth.', 'I like to make smoothies with raspberry.', 'The texture of banana is soft and smooth.', 'I like to make smoothies with pineapple.', 'The texture of plum is soft and smooth.', 'A raspberry a day keeps the doctor away.', 'The color of the lime is beautiful.', 'The mango is sweet and juicy.', 'I love to eat strawberry for breakfast.', 'A blackberry a day keeps the doctor away.', 'I prefer strawberry over other fruits.', 'The orange is sweet and juicy.', 'My favorite fruit is pear.', 'I am allergic to blueberry.', 'My favorite fruit is apple.', 'The texture of apricot is soft and smooth.', 'The color of the kiwi is beautiful.', 'I prefer raspberry over other fruits.', 'A strawberry a day keeps the doctor away.', 'The strawberry is sweet and juicy.', 'I like to make smoothies with plum.', 'A strawberry a day keeps the doctor away.', 'I prefer banana over other fruits.', 'The texture of watermelon is soft and smooth.', 'I love to eat pineapple for breakfast.', 'The color of the pineapple is beautiful.', 'I love to eat banana for breakfast.', 'The texture of apricot is soft and smooth.', 'The peach is sweet and juicy.', 'The color of the apricot is beautiful.', 'I am allergic to kiwi.', 'I am allergic to mango.', 'I am allergic to blackberry.', 'I prefer mango over other fruits.', 'I prefer blueberry over other fruits.']

# Step 2: Preprocess the documents
def preprocess(text):
    # Tokenize the text into words
    words = nltk.word_tokenize(text.lower())
    
    # Remove stop words and punctuation
    words = [word for word in words if word.isalnum() and not word in stopwords.words('english')]
    
    # Stem the words
    stemmer = nltk.stem.PorterStemmer()
    words = [stemmer.stem(word) for word in words]
    
    return words
# corpus = []
# for file_id in reuters.fileids():
#     document = reuters.raw(str(file_id))
#     corpus.append(preprocess(document))
corpus = [preprocess(text) for text in corpus]

# Step 3: Calculate term frequencies
def calculate_tf(document):
    tf = defaultdict(int)
    for word in document:
        tf[word] += 1
    return tf

tf_corpus = [calculate_tf(document) for document in corpus]

# Step 4: Calculate inverse document frequency (IDF)
def calculate_idf(corpus):
    N = len(corpus)
    idf = defaultdict(float)
    for document in corpus:
        for word in document:
            idf[word] += 1
    
    for word in idf:
        idf[word] = math.log(N / idf[word])
    
    return idf

idf = calculate_idf(corpus)

# Step 5: Calculate document length
def calculate_document_length(document):
    length = 0
    for word in document:
        length += tf_corpus[corpus.index(document)][word] * idf[word] ** 2
    return math.sqrt(length)

document_lengths = [calculate_document_length(document) for document in corpus]

# Step 6: Build the index
index = defaultdict(list)
for i, document in enumerate(corpus):
    for word in set(document):
        index[word].append((i, tf_corpus[i][word], idf[word]))

# Step 7: Perform the query
def perform_query(query, idf):
    query = preprocess(query)
    query_tf = calculate_tf(query)
    query_idf = {word: idf[word] for word in query}
    scores = defaultdict(float)
    for word in query:
        for document, tf, idf in index[word]:
            scores[document] += query_tf[word] * tf * idf * query_idf[word]
    for document in scores:
        scores[document] /= document_lengths[document]
    # st.write(sorted(scores.items(), key=lambda x: x[1], reverse=True))
    return sorted(scores.items(), key=lambda x: x[1], reverse=True)

results = perform_query(query, idf)
# st.write(results, corpus) 
baloon = False
st.write("Results:")
for document, score in results:
    st.write("Document:", document,"  |  Score:", score)
    st.write("Keywords: ", corpus[document])
    st.write("--------------------------------------")
    baloon = True
if(query):
    if(baloon) :
        st.balloons()
    else:
        st.error("keyword not found in the given documents")
